#!/bin/bash

set +e

>&2 echo "This script will delete all temporary cache dirs from home."
read -p "Do you want to continue? (y/n) " answer
case "$answer" in
  [Yy]* )
    >&2 echo "Proceeding..."
    empty=`mktemp -d`
    rsync -a --delete $empty $HOME/.npm
    rsync -a --delete $empty $HOME/.local
    rsync -a --delete $empty $HOME/.cache
    rsync -a --delete $empty $HOME/.config/nvm
    rsync -a --delete $empty $HOME/.vscode-server
    rsync -a --delete $empty $HOME/.miniconda3
    rsync -a --delete $empty $HOME/.bun
    rsync -a --delete $empty $HOME/go
    find . -type d -name "node_modules" -exec rsync -a --delete $empty {} +
    find . -type d -name "site-packages" -exec rsync -a --delete $empty {} +
    >&2 echo "...Done!"
    ;;
  [Nn]* )
    echo "Aborting."
    exit 1
    ;;
  * )
    echo "Invalid input. Please enter y or n."
    ;;
esac
